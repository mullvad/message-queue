# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

tasks:
  - name: Redis Server
    init: |
      sudo apt update -y
      sudo apt install redis-server -y
    command: |
      clear
      redis-server

  - name: Redis CLI
    command: |
      clear
      gp ports await 6379
      redis-cli
  
  - name: Queue Server
    init: go get
    command: |
      clear
      go run . -redis-address=127.0.0.1:6379 -channels=main,test

  - name: Websocat WS Client
    init: |
      sudo wget https://github.com/vi/websocat/releases/download/v1.11.0/websocat.x86_64-unknown-linux-musl -O /bin/websocat
      sudo chmod +x /bin/websocat
    command: |
      clear
      gp ports await 8080
      echo "Connected to 'main' channel"
      websocat ws://localhost:8080/channel/main --protocol message-queue-v1 

